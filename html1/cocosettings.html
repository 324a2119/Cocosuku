<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>è¨­å®š â€” ã‚³ã‚³ã‚¹ã‚¯</title>
<style>
:root{
  --bg:#fff7f9;
  --card:#fff;
  --accent:#ffd1dc;
  --accent2:#ffeeba;
  --text:#444;
  --muted:#888;
  --radius:16px;
  /* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ã‚‹ */
  font-family:"Noto Sans JP","Rounded Mplus 1c",sans-serif; 
}
*{box-sizing:border-box;}
body{margin:0;padding:0;background:var(--bg);color:var(--text);overflow-x:hidden;}
/* ãƒŠãƒ“ãƒãƒ¼ã®é«˜ã•(60px)ã‚’è€ƒæ…®ã—ã¦padding-bottomã‚’è¿½åŠ  */
.app{display:flex;flex-direction:column;max-width:600px;margin:0 auto;min-height:100vh;padding:8px; padding-bottom: 80px;} 
.brand{display:flex;align-items:center;gap:8px;margin-bottom:8px;cursor:pointer;}
.logo{width:44px;height:44px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;color:#fff;font-size:18px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}

/* è¨­å®šã‚«ãƒ¼ãƒ‰ */
.settings-group{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:0 2px 8px rgba(0,0,0,0.08);
  margin-bottom:16px;
  padding:16px;
}
.group-title{
  font-size:18px;
  font-weight:bold;
  margin-bottom:12px;
  border-bottom:2px solid var(--accent);
  padding-bottom:4px;
}
.setting-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 0;
  border-bottom:1px solid #eee;
  cursor:pointer;
}
.setting-item:last-child{
  border-bottom:none;
}
.setting-label{
  font-size:16px;
}
.setting-value, .setting-action{
  color:var(--muted);
  font-size:15px;
  font-weight:bold;
}
.setting-action:hover{
  text-decoration:underline;
  color:#ff7fa3;
}
.logout-btn{
  width:100%;
  padding:12px;
  border:none;
  border-radius:var(--radius);
  background:#f44;
  color:#fff;
  font-weight:bold;
  font-size:16px;
  cursor:pointer;
  margin-top:20px;
  transition: background 0.2s;
}
.logout-btn:hover{
  background:#e33;
}

/* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã‚³ãƒ”ãƒ¼ã—ãŸãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚¹ã‚¿ã‚¤ãƒ« */
.nav-bar{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  height:60px;
  max-width:600px;
  margin:0 auto;
  background:var(--card);
  box-shadow:0 -2px 6px rgba(0,0,0,0.1);
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-radius:var(--radius) var(--radius) 0 0;
  z-index:15;
}
.nav-item{
  flex:1;
  text-align:center;
  text-decoration:none;
  color:var(--muted);
  font-size:11px; /* 6é …ç›®ã«åˆã‚ã›ã¦ç¸®å° */
  cursor:pointer;
  padding:8px 0;
  transition: color 0.2s, background 0.2s;
}
.nav-item.active{
  color:#ff7fa3;
  font-weight:bold;
}
.nav-item:hover{
  background:rgba(0,0,0,0.05);
  border-radius:10px;
}

/* ãƒ­ã‚°ã‚¢ã‚¦ãƒˆç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¹ã‚¿ã‚¤ãƒ« */
.modal-bg{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.5);
  display:none; /* åˆæœŸå€¤ */
  justify-content:center;
  align-items:center;
  z-index:20;
}
.modal-content{
  background:var(--card);
  padding:20px;
  border-radius:var(--radius);
  width:90%;
  max-width:450px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}
.modal-actions button {
    padding: 10px 15px;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.2s;
}
</style>
</head>
<body>
<div class="app">
  <div class="brand" onclick="goTimeline()">
    <div class="logo">ã‚³</div>
    <div class="app-name" style="font-size:20px; font-weight:bold;">è¨­å®š</div>
  </div>

  <div class="settings-group">
    <div class="group-title">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š</div>
    <!-- alert()ã‚’ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã«ç½®ãæ›ãˆ -->
    <div class="setting-item" onclick="handleNavigation('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†')">
      <div class="setting-label">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç·¨é›†</div>
      <div class="setting-action">ï¼</div>
    </div>
    <div class="setting-item" onclick="handleNavigation('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ç”»é¢')">
      <div class="setting-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´</div>
      <div class="setting-action">ï¼</div>
    </div>
    <div class="setting-item" onclick="handleNavigation('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å¤‰æ›´ç”»é¢')">
      <div class="setting-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</div>
      <div class="setting-value">user@example.com</div>
    </div>
  </div>

  <div class="settings-group">
    <div class="group-title">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®š</div>
    <div class="setting-item" onclick="handleNavigation('ãƒ–ãƒ­ãƒƒã‚¯ãƒªã‚¹ãƒˆç”»é¢')">
      <div class="setting-label">ãƒ–ãƒ­ãƒƒã‚¯ä¸­ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼</div>
      <div class="setting-action">ï¼</div>
    </div>
    <div class="setting-item" onclick="handleNavigation('ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®šç”»é¢')">
      <div class="setting-label">å…¬é–‹è¨­å®š</div>
      <div class="setting-value">å…¨ä½“å…¬é–‹</div>
    </div>
  </div>

  <div class="settings-group">
    <div class="group-title">ãã®ä»–</div>
    <div class="setting-item" onclick="handleNavigation('åˆ©ç”¨è¦ç´„')">
      <div class="setting-label">åˆ©ç”¨è¦ç´„</div>
      <div class="setting-action">ï¼</div>
    </div>
    <div class="setting-item" onclick="handleNavigation('ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼')">
      <div class="setting-label">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</div>
      <div class="setting-action">ï¼</div>
    </div>
    <div class="setting-item" onclick="handleNavigation('ãƒ˜ãƒ«ãƒ—/FAQ')">
      <div class="setting-label">ãƒ˜ãƒ«ãƒ—ã¨ã‚µãƒãƒ¼ãƒˆ</div>
      <div class="setting-action">ï¼</div>
    </div>
  </div>
  
  <!-- logout()ã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ãå‡¦ç†ã«ç½®ãæ›ãˆ -->
  <button class="logout-btn" onclick="openLogoutModal()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>

</div>

<!-- ãƒ­ã‚°ã‚¢ã‚¦ãƒˆç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-bg" id="logoutModal">
    <div class="modal-content">
        <h3 style="margin-top:0; color:var(--text);">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆç¢ºèª</h3>
        <p style="margin-bottom:20px;">æœ¬å½“ã«ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ</p>
        <div class="modal-actions" style="display:flex; justify-content:flex-end; gap:10px;">
            <button onclick="closeLogoutModal()" style="background:#eee; border:1px solid #ddd; color:var(--text);">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button onclick="performLogout()" style="background:#f44; border:none; color:#fff;">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </div>
    </div>
</div>


<!-- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã‚³ãƒ”ãƒ¼ã—ãŸãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã€‚ã“ã®ãƒšãƒ¼ã‚¸ï¼ˆè¨­å®šï¼‰ã‚’activeã«è¨­å®š -->
<div class="nav-bar">
  <a href="cocotimeline.html" class="nav-item">ğŸ  TL</a>
  <a href="cocosearch.html" class="nav-item">ğŸ” æ¤œç´¢</a>
  <a href="coconotifications.html" class="nav-item">ğŸ”” é€šçŸ¥</a>
  <a href="cocochat.html" class="nav-item">ğŸ’¬ DM</a>
  <a href="cocoprofile.html" class="nav-item">ğŸ‘¤ ãƒ—ãƒ­ãƒ•</a>
  <!-- ğŸ“… äºˆå®š ã®ä»£ã‚ã‚Šã« âš™ï¸ è¨­å®š ã‚’é…ç½®ã—ã€activeã«ã™ã‚‹ -->
  <a href="cocosettings.html" class="nav-item active">âš™ï¸ è¨­å®š</a> 
</div>

<script type="module">
// Firebase/Firestore setup (MANDATORY Boilerplate)
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
import { getFirestore, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

setLogLevel('Debug');
const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');

let app, db, auth;

// Use a self-invoking async function for setup
(async () => {
    try {
        if (Object.keys(firebaseConfig).length > 0) {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            
            // Mandatory Auth Check
            if (typeof __initial_auth_token !== 'undefined') {
                await signInWithCustomToken(auth, __initial_auth_token);
            } else {
                await signInAnonymously(auth);
            }
            console.log("Firebase/Auth setup complete. User ID:", auth.currentUser?.uid || 'N/A');
        } else {
            console.warn("Firebase config not available. Running in simulation mode.");
        }
    } catch (e) {
        console.error("Firebase setup failed:", e);
    }
})();


// --- ãƒšãƒ¼ã‚¸æ“ä½œé–¢æ•° ---

function goTimeline(){ 
    console.log("ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¸é·ç§»...");
    window.location.href="cocotimeline.html"; 
}
window.goTimeline = goTimeline; // HTMLã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«è¨­å®š

// alert()ã®ä»£ã‚ã‚Šã«ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
function handleNavigation(destination){
    console.log(`${destination} ã¸ã®é·ç§»ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã¾ã™ã€‚`);
    // å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã§ã¯ã“ã“ã§ window.location.href ã‚’ä½¿ã„ã¾ã™
}
window.handleNavigation = handleNavigation; // HTMLã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«è¨­å®š


// --- ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œé–¢æ•° ---

function openLogoutModal() { 
    document.getElementById('logoutModal').style.display = 'flex'; 
}
window.openLogoutModal = openLogoutModal;

function closeLogoutModal() { 
    document.getElementById('logoutModal').style.display = 'none'; 
}
window.closeLogoutModal = closeLogoutModal;

function performLogout() {
    // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    // å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ã“ã“ã§ Firebase Auth ã® signOut() ã‚’å‘¼ã³å‡ºã—ã¾ã™
    console.log("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã—ãŸã€‚"); 
    window.location.href="cocologin.html";
    closeLogoutModal();
}
window.performLogout = performLogout;
</script>
</body>
</html>
